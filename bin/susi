#!/bin/bash 
#
# Commandline interface to Susi.
# usage:
#     Just tell susi what to do, such as:
#     $ susi please switch on the light
#
# (c) 2020, Andreas Dominik, Gie√üen, Germany
#

COMMAND="$@"

CONFIG="/etc/susi.toml"
source $SUSI_INSTALLATION/bin/toml2env $CONFIG

# load tool funs:
#
source $SUSI_INSTALLATION/src/Tools/funs.sh
source $SUSI_INSTALLATION/src/Tools/topics.sh

PAYLOAD="{
          \"siteId\": \"default\",
          \"init\": {\"type\": \"command\",
                     \"text\": \"$COMMAND\"}
         }"

  PAYLOAD="$(echo $PAYLOAD)"

  $mqtt_publish -t "$TOPIC_START_SESSION" -m "$PAYLOAD"
