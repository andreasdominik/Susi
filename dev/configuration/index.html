<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · Susi</title><link rel="canonical" href="https://andreasdominik.github.io/Susi/dev/configuration/index.html"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../pages/"><img src="../assets/logo.svg" alt="Susi logo"/></a><div class="docs-package-name"><span class="docs-autofit">Susi</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../pages/">Introduction</a></li><li><a class="tocitem" href="../pages/install/">Installation</a></li><li><a class="tocitem" href="../pages/nlu/">NLU</a></li><li><a class="tocitem" href="../pages/configuration/">Configuration</a></li><li><a class="tocitem" href="../pages/components/">Components</a></li><li><a class="tocitem" href="../pages/payloads/">Payloads</a></li><li><a class="tocitem" href="../pages/topics/">Topics</a></li><li><a class="tocitem" href="../pages/tools/">Tools</a></li><li><a class="tocitem" href="../LICENSE/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/andreasdominik/Susi/blob/master/docs/src/configuration.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Configuration-file-susi.toml-1"><a class="docs-heading-anchor" href="#Configuration-file-susi.toml-1">Configuration file <code>susi.toml</code></a><a class="docs-heading-anchor-permalink" href="#Configuration-file-susi.toml-1" title="Permalink"></a></h2><p>The central configuration file is located at <code>/etc/susi.toml</code>.</p><h3 id="Configuration-for-all-daemons-1"><a class="docs-heading-anchor" href="#Configuration-for-all-daemons-1">Configuration for all daemons</a><a class="docs-heading-anchor-permalink" href="#Configuration-for-all-daemons-1" title="Permalink"></a></h3><p>All daemons share some config entries:</p><ul><li><code>start = &quot;true&quot;</code> defines if the daemon is started with the susi service or not.</li><li><code>daemoon = &quot;xyz&quot;</code> is the path to the executable that runs the daemon.</li><li><code>binary = &quot;xyz&quot;</code> is the path to the executable that does the job when the daemon is gets a trigger.</li></ul><h3 id="Sections-1"><a class="docs-heading-anchor" href="#Sections-1">Sections</a><a class="docs-heading-anchor-permalink" href="#Sections-1" title="Permalink"></a></h3><p>The sections of the susi.toml file are:</p><h4 id="[assistant]-1"><a class="docs-heading-anchor" href="#[assistant]-1">[assistant]</a><a class="docs-heading-anchor-permalink" href="#[assistant]-1" title="Permalink"></a></h4><p>Name and language of the assistant.</p><h4 id="[local]-1"><a class="docs-heading-anchor" href="#[local]-1">[local]</a><a class="docs-heading-anchor-permalink" href="#[local]-1" title="Permalink"></a></h4><p>Work directory to store temporary files and name of the local siteId. Each satellite needs an unique name. If satellite is set to &quot;true&quot;, only hotword, record and play daemon will be started on this site.</p><p>All variants of installation are possible, such as</p><ul><li>running all daemons on one system with mic and speaker</li><li>running one main system (e.g. in the living room) with all daemons started and satellites.</li><li>running parts of the software on separate systems without mic or speaker, such as the skills daemon on a server only for this purpose or running a headless server with GPU only for STT with DeepSpeech. To setup such a server, just do a normal susi install  and set all daemon start-values to false, except the one that should run.</li></ul><h4 id="[mqtt]-1"><a class="docs-heading-anchor" href="#[mqtt]-1">[mqtt]</a><a class="docs-heading-anchor-permalink" href="#[mqtt]-1" title="Permalink"></a></h4><p>Host and port definitions for the MQTT broker. If empty, the default &quot;localhost&quot; and port &quot;8883&quot; will be used. For installations with satellites the satellites will use this setting to find the correct MQTT broker.</p><p>User and password will be used by the broker and all clients.</p><p>With the subscribe and publish entries the MQTT client binaries can be specified. Currently only eclipse mosquitto is supported.</p><h4 id="[hotword]-1"><a class="docs-heading-anchor" href="#[hotword]-1">[hotword]</a><a class="docs-heading-anchor-permalink" href="#[hotword]-1" title="Permalink"></a></h4><p>Configuration of the hotword daemon. When the daemon is started, it waits for a MQTT message to toggle on hotword detection.</p><ul><li>The <code>binary</code> must  point to the hotword detector (default: <code>/opt/Snowboy/rpi-arm-raspbian-8.0-1.3.0/hotword_susi.py</code>)</li><li><code>model_path</code> and <code>model</code> define the hotword model to be used.</li><li><code>notification</code> is useful for debugging: if &quot;true&quot;, the specified sound file will be played every time the detector is toggeled on.</li></ul><h4 id="[record]-1"><a class="docs-heading-anchor" href="#[record]-1">[record]</a><a class="docs-heading-anchor-permalink" href="#[record]-1" title="Permalink"></a></h4><p>Configuration of the record daemon.</p><ul><li><code>binary</code> by default points to a script that uses sox to record commands.</li><li><code>recording_limit</code> defines the maximum time to wait for a command</li><li>if <code>notification</code> is set to true, a sound defined by <code>notification_start</code> is played every time recoding starts. If <code>notification_start</code> points to a directory (instead of an audio file), one randomly selected files in the directory will be played.     (if the directory contains speech files, such as &quot;hello&quot;, &quot;how can I help you&quot;, &quot;I am your assistant&quot;, &quot;what can I do for you&quot;, the daemon will play one of these sentences).</li></ul><h4 id="[play]-1"><a class="docs-heading-anchor" href="#[play]-1">[play]</a><a class="docs-heading-anchor-permalink" href="#[play]-1" title="Permalink"></a></h4><p>Configuration of the play daemon.</p><h4 id="[tts]-1"><a class="docs-heading-anchor" href="#[tts]-1">[tts]</a><a class="docs-heading-anchor-permalink" href="#[tts]-1" title="Permalink"></a></h4><p>Configuration of the tts daemon.</p><p>By default, Google TTS is used with caching because the quality of Google&#39;s voices is very good. Caching means that an audio file of every uttered sentence will be stored in the cache. As assistants tend to say the same things again and again (&quot;hello&quot;, &quot;OK&quot;, &quot;I copy&quot;), only a small number calls to the webservice is necessary after some time of operation.</p><h4 id="[stt]-1"><a class="docs-heading-anchor" href="#[stt]-1">[stt]</a><a class="docs-heading-anchor-permalink" href="#[stt]-1" title="Permalink"></a></h4><p>Configuration of the STT daemon. By default Google STT is used because of its very high accuracy and common knowledge. However, it&#39;s no longer local and private.     Mozilla DeepSpeech can be used for English language if installed by uncommenting the respective line. Other services may be included by exchange the <code>binary</code>.</p><h4 id="[nlu]-1"><a class="docs-heading-anchor" href="#[nlu]-1">[nlu]</a><a class="docs-heading-anchor-permalink" href="#[nlu]-1" title="Permalink"></a></h4><p>Configuration of the NLU (natural language understanding) daemon. The default daemon is implemented in Julia and uses Regular Expressions for intent matching and capturing of slots values. sh sus For more details see the NLU section of the docu. The NLU also reads the skill directory from the <code>[skills]</code> section to find skills.</p><h4 id="[session]-1"><a class="docs-heading-anchor" href="#[session]-1">[session]</a><a class="docs-heading-anchor-permalink" href="#[session]-1" title="Permalink"></a></h4><p>Configuartionj of the session manager which runs ste sequences of actions, such as <code>hotword -&gt; record -&gt; stt -&gt; nlu -&gt; publish intent</code>.</p><h4 id="[duckling]-1"><a class="docs-heading-anchor" href="#[duckling]-1">[duckling]</a><a class="docs-heading-anchor-permalink" href="#[duckling]-1" title="Permalink"></a></h4><p>Insert the correct installation dir to susi.toml (/opt/Duckling/duckling) with the leading / to enforce absolute path. If an externam duckling-service is used, correct host and password information must be provided.</p><h4 id="[skills]-1"><a class="docs-heading-anchor" href="#[skills]-1">[skills]</a><a class="docs-heading-anchor-permalink" href="#[skills]-1" title="Permalink"></a></h4><p>The skills daemon will start all skills in <code>skills_dir</code> and all subdirectories. Like with Snips, a skill is considered to be an executable file with a name starting with <code>action-</code>.</p><h3 id="Optional-sections-1"><a class="docs-heading-anchor" href="#Optional-sections-1">Optional sections</a><a class="docs-heading-anchor-permalink" href="#Optional-sections-1" title="Permalink"></a></h3><p>If external software is integrated, the file will show sections for these:</p><h4 id="[google_cloud]-1"><a class="docs-heading-anchor" href="#[google_cloud]-1">[google_cloud]</a><a class="docs-heading-anchor-permalink" href="#[google_cloud]-1" title="Permalink"></a></h4><p>Settings:</p><ul><li>path to the credentials file</li><li>command for refresh the token.</li></ul><h4 id="[deep_speech]-1"><a class="docs-heading-anchor" href="#[deep_speech]-1">[deep_speech]</a><a class="docs-heading-anchor-permalink" href="#[deep_speech]-1" title="Permalink"></a></h4><p>If Mozilla DeepSpeech is used as STT engine, it can be configured here. Deep speech needs</p><ul><li><code>model</code>: the trained neural network</li><li><code>language_model</code>: ngram model for the language</li><li><code>trie</code>: the suffix tree for fast searched in the language model.</li></ul></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 22 February 2020 16:20">Saturday 22 February 2020</span>. Using Julia version 1.2.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
