<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · Susi</title><link rel="canonical" href="https://andreasdominik.github.io/Susi/dev/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.svg" alt="Susi logo"/></a><div class="docs-package-name"><span class="docs-autofit">Susi</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Main-components-1"><span>Main components</span></a></li></ul></li><li><a class="tocitem" href="pages/install/">Installation</a></li><li><a class="tocitem" href="pages/configuration/">Configuration</a></li><li><a class="tocitem" href="pages/components/">Components</a></li><li><a class="tocitem" href="pages/nlu/">NLU</a></li><li><a class="tocitem" href="pages/topics/">Topics</a></li><li><a class="tocitem" href="pages/payloads/">Payloads</a></li><li><a class="tocitem" href="pages/tools/">Tools</a></li><li><a class="tocitem" href="LICENSE/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/andreasdominik/Susi/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Susi-1"><a class="docs-heading-anchor" href="#Susi-1">Susi</a><a class="docs-heading-anchor-permalink" href="#Susi-1" title="Permalink"></a></h1><p>Susi (SUsi is not SnIps) is a replacement for the Snips home assistant ecosystem. It follows mainly the same architecture as Snips (with a MQTT broker as central unit and MQTT messages exchanged between the components). Consequently most native Snips skills will run with Susi as well but without the need of the (no longer available) Snips console.</p><p>Susi is build as a modular system as a collection of of daemons (hotword detection, record, speech to text, intent recognion, play, skill managment). Most daemons are lightweight bash scripts responsible for communication with other daemons via MQTT messages. The actual workers for the respective functionality can be configured separately and hence can be replaced easily.</p><h2 id="Main-components-1"><a class="docs-heading-anchor" href="#Main-components-1">Main components</a><a class="docs-heading-anchor-permalink" href="#Main-components-1" title="Permalink"></a></h2><p>All components run standalone on oneor more satellites of the installation and communicate with each other and with the session manager via MQTT.</p><p>A default session includes the following components and steps:</p><h4 id="MQTT-broker-1"><a class="docs-heading-anchor" href="#MQTT-broker-1">MQTT broker</a><a class="docs-heading-anchor-permalink" href="#MQTT-broker-1" title="Permalink"></a></h4><p>A <code>mosquitto</code> MQTT broker ist started by the susi service. Hostname, port, login and password must be configured in the <code>/etc/susi.toml</code> files of all satellites.</p><h4 id="Hotword-detection-1"><a class="docs-heading-anchor" href="#Hotword-detection-1">Hotword detection</a><a class="docs-heading-anchor-permalink" href="#Hotword-detection-1" title="Permalink"></a></h4><p>An hotword detector must run on all sattelites, on which voice commands need to be detected. The detector program must publish a MQTT-topic with topic <code>hermes/hotword/detected</code> and the siteId as payload.</p><h4 id="Record-service-1"><a class="docs-heading-anchor" href="#Record-service-1">Record service</a><a class="docs-heading-anchor-permalink" href="#Record-service-1" title="Permalink"></a></h4><p>A record service must run on all sattelites, on which voice commands need to be detected. It subscribes to the MQTT-topic <code>hermes/asr/startListening</code>. If a message with the correct siteId is received, it records a voice command and publishes a message with topic <code>susi/asr/audioCaptured</code> and the base64-encoded recording in flac-format. The payload id matches the id of the request.</p><h4 id="Speech-to-text-service-1"><a class="docs-heading-anchor" href="#Speech-to-text-service-1">Speech-to-text service</a><a class="docs-heading-anchor-permalink" href="#Speech-to-text-service-1" title="Permalink"></a></h4><p>A speech-to-text service runs only once for an installation. It subscribes to the MQTT-topic <code>susi/asr/transscribe</code>. If a message is received, it extracts text from the audio and publishes a message with topic <code>hermes/asr/textCaptured</code> with the transcribed text as payload. The payload id matches the id of the request.</p><h4 id="Natural-language-understanding-1"><a class="docs-heading-anchor" href="#Natural-language-understanding-1">Natural language understanding</a><a class="docs-heading-anchor-permalink" href="#Natural-language-understanding-1" title="Permalink"></a></h4><p>A NLU service runs only once for an installation. It subscribes to the MQTT-topic <code>hermes/nlu/query</code>. If a message is received, it extracts text from the audio and publishes a message with topic <code>hermes/nlu/intentParsed</code> with the recognised skill intent as payload or <code>hermes/nlu/intentNotRecognized</code>. The payload id matches the id of the request.</p><h4 id="Session-manager-1"><a class="docs-heading-anchor" href="#Session-manager-1">Session manager</a><a class="docs-heading-anchor-permalink" href="#Session-manager-1" title="Permalink"></a></h4><p>The session manager runs only once for an installation. It orchestrates session sequences (like the one described above) starts, queues and ends sessions and publishes final intents.</p><h4 id="Skill-manager-1"><a class="docs-heading-anchor" href="#Skill-manager-1">Skill manager</a><a class="docs-heading-anchor-permalink" href="#Skill-manager-1" title="Permalink"></a></h4><p>Skills are standalone programs that may run aon any computer of a Susi installation.  Each skill must subscribe to the topics of its intents (such as <code>/hermes/intent/andreasdominik:LightOn</code>) and execute the requested actions.</p><p>Susi&#39;s skill manager makes sure, that all skills located in the skills directory are running (all skills with name pattern <code>action-...</code> wil be started with teh susi service and restarted if they crash).</p><h4 id="Play-service-1"><a class="docs-heading-anchor" href="#Play-service-1">Play service</a><a class="docs-heading-anchor-permalink" href="#Play-service-1" title="Permalink"></a></h4><p>A play service must run on all sattelites, on which audio output is required. It subscribes to the MQTT-topic <code>susi/playserver/request</code>. If a message with the correct siteId is received, it playsteh audio included in the payload and publishes a message with topic <code>susi/playserver/playFinished</code>. The payload id matches the id of the request.</p><h4 id="Text-to-speech-service-1"><a class="docs-heading-anchor" href="#Text-to-speech-service-1">Text-to-speech service</a><a class="docs-heading-anchor-permalink" href="#Text-to-speech-service-1" title="Permalink"></a></h4><p>A text-to-speech service runs only once for an installation. It subscribes to the MQTT-topic <code>susi/tts/request</code>. If a message is received, it geberates an aodio of the text and publishes it as payload of   a message with topic <code>susi/tts/audio</code>. The payload id matches the id of the request.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="pages/install/">Installation »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 22 April 2020 11:43">Wednesday 22 April 2020</span>. Using Julia version 1.2.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
