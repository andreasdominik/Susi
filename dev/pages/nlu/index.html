<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>NLU · Susi</title><link rel="canonical" href="https://andreasdominik.github.io/Susi/dev/pages/nlu/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../../assets/logo.svg" alt="Susi logo"/></a><div class="docs-package-name"><span class="docs-autofit">Susi</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../install/">Installation</a></li><li><a class="tocitem" href="../configuration/">Configuration</a></li><li><a class="tocitem" href="../components/">Components</a></li><li class="is-active"><a class="tocitem" href>NLU</a></li><li><a class="tocitem" href="../topics/">Topics</a></li><li><a class="tocitem" href="../payloads/">Payloads</a></li><li><a class="tocitem" href="../tools/">Tools</a></li><li><a class="tocitem" href="../../LICENSE/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>NLU</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>NLU</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/andreasdominik/Susi/blob/master/docs/src/pages/nlu.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="NLU-1"><a class="docs-heading-anchor" href="#NLU-1">NLU</a><a class="docs-heading-anchor-permalink" href="#NLU-1" title="Permalink"></a></h1><p>The NLU component replaces the Snips NLU and is independent from the Snips console. It is configured only with a configuration file <code>nlu.xx.toml</code> for each skill, where &#39;xx&#39; denotes a 2-letter language code. The nlu configuration files must be present somewhere in the skill&#39;s mother or sundiretories.</p><h3 id="Formate-of-the-NLU-definition-file-1"><a class="docs-heading-anchor" href="#Formate-of-the-NLU-definition-file-1">Formate of the NLU definition file</a><a class="docs-heading-anchor-permalink" href="#Formate-of-the-NLU-definition-file-1" title="Permalink"></a></h3><h4 id="SlotName-1"><a class="docs-heading-anchor" href="#SlotName-1"><code>&lt;SlotName&gt;</code></a><a class="docs-heading-anchor-permalink" href="#SlotName-1" title="Permalink"></a></h4><p>Parse this part of the command as slot. SlotName is case sensitive.</p><h4 id="-1"><a class="docs-heading-anchor" href="#-1"><code>&lt;&gt;</code></a><a class="docs-heading-anchor-permalink" href="#-1" title="Permalink"></a></h4><p>Match any word or no word, but do not parse into a slot.</p><p>The files are in standard toml format, constisting of &#39;key&#39; -&gt; &#39;value&#39; pairs or &#39;key&#39; -&gt; &#39;list&#39; pairs. Lists with only one entry may be written as values (without brackets).</p><p>The nlu.xx.toml file includes the parts:</p><h4 id="head-1"><a class="docs-heading-anchor" href="#head-1">head</a><a class="docs-heading-anchor-permalink" href="#head-1" title="Permalink"></a></h4><p>The head defines the name of the configured skill and the name of the skill developer (the developer name is used to generate Snips-compatible intent names).</p><p>The inventory section lists all intents and slots configured and used in the file:</p><pre><code class="language-none"># head:
#
skill = &quot;RollerShutter&quot;
developer = &quot;andreasdominik&quot;

[inventory]
slots = [&quot;room&quot;, &quot;device&quot;, &quot;Action&quot;]
intents = [&quot;RollerUpDown&quot;]</code></pre><h4 id="Slot-definitions-1"><a class="docs-heading-anchor" href="#Slot-definitions-1">Slot definitions</a><a class="docs-heading-anchor-permalink" href="#Slot-definitions-1" title="Permalink"></a></h4><p>The scope slot definitions is one skill; i.e. a defined slot can be used in all intents of a skill.</p><p>For each listed slot, a slot definition section must be present in the toml file, including the keys <code>slot_type</code>, optional <code>allow_empty</code> and optional sub-section <code>slotname.synonyms</code>:</p><pre><code class="language-none"># slot definitions:
#
[room]
slot_type = &quot;ListOfValues&quot;
allow_empty = true

        [room.synonyms]
        &quot;house&quot; = [&quot;everywhere&quot;, &quot;in the house&quot;, &quot;house&quot;]
        &quot;dining&quot; = [&quot;dining room&quot;, &quot;dining&quot;]
        &quot;stairs&quot; = [&quot;staircase&quot;, &quot;stairs&quot;]
        &quot;kitchen&quot; = &quot;kitchen&quot;
        &quot;bedroom&quot; = [&quot;bedroom&quot;, &quot;parents bedroom&quot;]</code></pre><p><strong>slot_type</strong> is one of &#39;ListOfValues&#39;, &#39;Any&#39;, &#39;Number&#39;, &#39;Ordinal&#39; or &#39;Time&#39;; see below for details.     If <strong>allow_empty</strong> is specified as true, an expression will match, even if the slot is not parsed. If the key &#39;allow_empty&#39; is missing, the default <code>false</code> is assumed.</p><h5 id="Slot-type-ListOfValues-1"><a class="docs-heading-anchor" href="#Slot-type-ListOfValues-1">Slot type ListOfValues</a><a class="docs-heading-anchor-permalink" href="#Slot-type-ListOfValues-1" title="Permalink"></a></h5><p>A slot type &#39;ListOfValues&#39; needs a mandatory subsection with synonymes, consisting of alternatives with a name and a list of values. In contrast to Snips, the names are not included in the list.</p><p>When parsing a command the slot will match if one of the words or phrases in one of the lists is recognised and the name of the respective synonym is returned as slot value. This way it is easy to write language-independent skill code, because the returned slot values are indepentent from the actual parsed commands.</p><h5 id="Slot-type-Any-1"><a class="docs-heading-anchor" href="#Slot-type-Any-1">Slot type Any</a><a class="docs-heading-anchor-permalink" href="#Slot-type-Any-1" title="Permalink"></a></h5><p>A slot of tyle &#39;Any&#39; will match any word or phrase.</p><p>In addition it is possible to add synonyms to a slot of type Any.</p><h5 id="Slot-types-Number,-Ordinal-and-Time-1"><a class="docs-heading-anchor" href="#Slot-types-Number,-Ordinal-and-Time-1">Slot types Number, Ordinal and Time</a><a class="docs-heading-anchor-permalink" href="#Slot-types-Number,-Ordinal-and-Time-1" title="Permalink"></a></h5><p>Slots of one of these types will be extracted from the command and passed to Duckling to get a number or timestring.</p><h4 id="Intent-definition-1"><a class="docs-heading-anchor" href="#Intent-definition-1">Intent definition</a><a class="docs-heading-anchor-permalink" href="#Intent-definition-1" title="Permalink"></a></h4><p>The last part of the configuration file holds <em>match phrases</em>, which are compared with transcribed commands to identify intents (actions to be executed within skills) and to extract slot values. The following rules apply:</p><ul><li>each intent is configured in a separate section of the toml file <code>[intentname]</code></li><li>several match phrases may be defined for each intent</li><li>each match phrase constists of a <em>name</em>, a <em>type</em> and the phrase to be matched</li><li>match phrases are matched in alphabetic order of their names</li><li>a match phrase can be of type &#39;regex&#39;, &#39;complete&#39;, &#39;partial&#39; or &#39;ordered&#39;.</li></ul><h5 id="match-phrase-type-regex-1"><a class="docs-heading-anchor" href="#match-phrase-type-regex-1">match phrase type regex</a><a class="docs-heading-anchor-permalink" href="#match-phrase-type-regex-1" title="Permalink"></a></h5><p>It is possible to write match phrases as Perl-compatible regular expresisons with a syntax, provided by the PCRE library (see http://www.pcre.org/current/doc/html/pcre2syntax.html for the syntax). Slots are defined as named capture groups with the slot name as capture group name.</p><h5 id="match-phrase-type-complete-1"><a class="docs-heading-anchor" href="#match-phrase-type-complete-1">match phrase type complete</a><a class="docs-heading-anchor-permalink" href="#match-phrase-type-complete-1" title="Permalink"></a></h5><p>To avoid the need to writing plain regular expressions, the types &#39;complete&#39;, &#39;partial&#39; and &#39;ordered&#39; provide an easier syntax.</p><p>For <code>complete</code>, the phrase is a sentence that must match completely, with several types of placeholders allowed:</p><ul><li><strong>\&lt;\&lt;slotname\&gt;\&gt;:</strong> the slot value is expected at this position. If the slot is configured as <code>allow_empty = true</code>, the phrase will match even if the slot is not present.</li><li><strong>\&lt;\&lt;word1|words and more|word3\&gt;\&gt;:</strong> one of the listed words or phrases is expected at this position. Words are separated by the pipe charater <code>|</code>. An empty alternative (&lt;&lt;word1|words and more|&gt;&gt; or &lt;&lt;word1||words and more&gt;&gt;) will match missing words as well.</li><li><strong>\&lt;\&lt;\&gt;\&gt;:</strong> the empty placeholder will match exactly one or no words.</li></ul><p>Examples:     the match phrase  </p><pre><code class="language-none">[RollerUpDown]
roller_a = &quot;complete: &lt;&lt;action&gt;&gt; the &lt;&lt;rollershutter|roller&gt;&gt; &lt;&lt;in|&gt;&gt; &lt;&lt;the|&gt;&gt; &lt;&lt;room&gt;&gt;&quot;</code></pre><p>will match the commands <code>&quot;Open the rollershutter in the kitchen&quot;</code> and <code>&quot;Open the rollershutter in kitchen&quot;</code> as well as <code>&quot;Open the rollershutter&quot;</code>, because the placeholders &quot;\&lt;\&lt;in|\&gt;\&gt;&quot; and &quot;\&lt;\&lt;the|\&gt;\&gt;&quot; allow empty values and &quot;\&lt;\&lt;room\&gt;\&gt;&quot; is allowed to be empty as well.</p><p>However the match phrase will <strong>not</strong> match <code>&quot;Please open the rollershutter in the kitchen&quot;</code>, because not the complete phrase mathes.</p><p>To be more specific optional words may be added, such as</p><pre><code class="language-none">roller_b = &quot;complete: &lt;&lt;please|&gt;&gt; &lt;&lt;action&gt;&gt; the &lt;&lt;rollershutter|roller&gt;&gt; &lt;&lt;in|&gt;&gt; &lt;&lt;the|&gt;&gt; &lt;&lt;room&gt;&gt; &lt;&lt;please|&gt;&gt;&quot;</code></pre><h5 id="match-phrase-type-partial-1"><a class="docs-heading-anchor" href="#match-phrase-type-partial-1">match phrase type partial</a><a class="docs-heading-anchor-permalink" href="#match-phrase-type-partial-1" title="Permalink"></a></h5><p>Match phrases of type &#39;partial&#39; follow the same rules as of type &#39;complete&#39;, with the difference that only parts of the command must match the phrase.</p><p>Examples: the match phrase</p><pre><code class="language-none">[RollerUpDown]
roller_b = &quot;partial: &lt;&lt;action&gt;&gt; the &lt;&lt;rollershutter|roller&gt;&gt; &lt;&lt;in|&gt;&gt; &lt;&lt;the|&gt;&gt; &lt;&lt;room&gt;&gt;&quot;</code></pre><p>will match <code>&quot;Please open the rollershutter in the kitchen&quot;</code> as well as <code>&quot;Please open the rollershutter in the kitchen and get me a coffee&quot;</code>.</p><h5 id="match-phrase-type-ordered-1"><a class="docs-heading-anchor" href="#match-phrase-type-ordered-1">match phrase type ordered</a><a class="docs-heading-anchor-permalink" href="#match-phrase-type-ordered-1" title="Permalink"></a></h5><p>Match phrases of type &#39;ordered&#39; follow the same rules but are more vague, as only all elements of the match phrase must be present in the command in the correct order. Additional words may be present before, after or inbetween the specified elements.</p><h4 id="Example-file-nlu.xx.toml-for-the-rollershutter-skill:-1"><a class="docs-heading-anchor" href="#Example-file-nlu.xx.toml-for-the-rollershutter-skill:-1">Example file nlu.xx.toml for the rollershutter skill:</a><a class="docs-heading-anchor-permalink" href="#Example-file-nlu.xx.toml-for-the-rollershutter-skill:-1" title="Permalink"></a></h4><p>A complete (but very simple and not yet sufficent) example nlu configuration file is shown in a version for 3 different languages. It must be pointet out, that the slot values extracted to the intent and sent to the skill code are exactly the same for all languages, which makes it easy to write language-intependant skill code.</p><h5 id="nlu.en.toml-1"><a class="docs-heading-anchor" href="#nlu.en.toml-1">nlu.en.toml</a><a class="docs-heading-anchor-permalink" href="#nlu.en.toml-1" title="Permalink"></a></h5><pre><code class="language-none"># nlu definition for RollerShutter skill
#
# head:
#
skill = &quot;RollerShutter&quot;
developer = &quot;andreasdominik&quot;

[inventory]
intents = [&quot;RollerUpDown&quot;]
slots = [&quot;room&quot;, &quot;Action&quot;]


# slot definitions:
#
[room]
slot_type = &quot;ListOfValues&quot;
allow_empty = true

        [room.synonyms]
        &quot;house&quot; = [&quot;everywhere&quot;, &quot;in the house&quot;, &quot;house&quot;]
        &quot;dining&quot; = [&quot;dining room&quot;, &quot;dining&quot;]
        &quot;stairs&quot; = [&quot;staircase&quot;, &quot;stairs&quot;]
        &quot;kitchen&quot; = &quot;kitchen&quot;
        &quot;bedroom&quot; = [&quot;bedroom&quot;, &quot;parents bedroom&quot;]

[action]
slot_type = &quot;ListOfValues&quot;

        [action.synonyms]
        &quot;open&quot; = [&quot;open&quot;, &quot;up&quot;]
        &quot;close&quot; = [&quot;close&quot;, &quot;down&quot;, &quot;shut&quot;]

# match phrases for intent recognion:
#
[RollerUpDown]
roller_a = &quot;partial: &lt;&lt;action&gt;&gt; the &lt;&lt;rollershutter|roller&gt;&gt; &lt;&lt;in|&gt;&gt; &lt;&lt;the|&gt;&gt; &lt;&lt;room&gt;&gt;&quot;
roller_b = &quot;complete: &lt;&lt;please|&gt;&gt; make the &lt;&lt;rollershutter|roller&gt;&gt; in the &lt;&lt;room|&gt;&gt; &lt;&lt;room&gt;&gt; &lt;&lt;action&gt;&gt; &lt;&lt;please|&gt;&gt;&quot;
roller_c = &quot;partial: make the &lt;&lt;rollershutter|roller&gt;&gt; &lt;&lt;&gt;&gt; &lt;&lt;action&gt;&gt;&quot;</code></pre><h5 id="nlu.fr.toml-1"><a class="docs-heading-anchor" href="#nlu.fr.toml-1">nlu.fr.toml</a><a class="docs-heading-anchor-permalink" href="#nlu.fr.toml-1" title="Permalink"></a></h5><pre><code class="language-none"># nlu definition for RollerShutter skill
#
# head:
#
skill = &quot;RollerShutter&quot;
developer = &quot;andreasdominik&quot;

[inventory]
intents = [&quot;RollerUpDown&quot;]
slots = [&quot;room&quot;, &quot;Action&quot;]


# slot definitions:
#
[room]
slot_type = &quot;ListOfValues&quot;
allow_empty = true

        [room.synonyms]
        &quot;house&quot; = [&quot;partout dans la maison&quot;, &quot;dans toute la maison&quot;, &quot;maison&quot;]
        &quot;dining&quot; = &quot;salle à manger&quot;
        &quot;stairs&quot; = [&quot;cage d&#39;escalier&quot;]
        &quot;kitchen&quot; = &quot;cuisine&quot;
        &quot;bedroom&quot; = [&quot;chambre&quot;]

[action]
slot_type = &quot;ListOfValues&quot;

        [action.synonyms]
        &quot;open&quot; = [&quot;ouvrir&quot;, &quot;ouvrez&quot;]
        &quot;close&quot; = [&quot;fermez&quot;]

# match phrases for intent recognion:
#
[RollerUpDown]
roller_a = &quot;&lt;&lt;veuillez|&gt;&gt; &lt;&lt;action&gt;&gt; &lt;&lt;le volet roulant|les volets|le volet&gt;&gt; &lt;&lt;de la|dans la|&gt;&gt; &lt;&lt;room&gt;&gt; &lt;&lt;s&#39;il vous plaît|&gt;&gt;&quot;</code></pre><h5 id="nlu.de.toml-1"><a class="docs-heading-anchor" href="#nlu.de.toml-1">nlu.de.toml</a><a class="docs-heading-anchor-permalink" href="#nlu.de.toml-1" title="Permalink"></a></h5><pre><code class="language-none"># nlu definition for RollerShutter skill
#
# head:
#
skill = &quot;RollerShutter&quot;
developer = &quot;andreasdominik&quot;

[inventory]
intents = [&quot;RollerUpDown&quot;]
slots = [&quot;room&quot;, &quot;Action&quot;]


# slot definitions:
#
[room]
slot_type = &quot;ListOfValues&quot;
allow_empty = true

        [room.synonyms]
        &quot;house&quot; = [&quot;überall&quot;, &quot;im ganzen Haus&quot;, &quot;Haus&quot;]
        &quot;dining&quot; = &quot;Esszimmer&quot;
        &quot;stairs&quot; = [&quot;Treppenhaus&quot;, &quot;Treppe&quot;]
        &quot;kitchen&quot; = &quot;Küche&quot;
        &quot;bedroom&quot; = [&quot;schlafzimmer&quot;]

[action]
slot_type = &quot;ListOfValues&quot;

        [action.synonyms]
        &quot;open&quot; = [&quot;auf&quot;, &quot;nach oben&quot;, &quot;öffne&quot;]
        &quot;close&quot; = [&quot;zu&quot;, &quot;herunter&quot;, &quot;runter&quot;, &quot;schließe&quot;]

# match phrases for intent recognion:
#
[RollerUpDown]
roller_a = &quot;partial: &lt;&lt;bitte|&gt;&gt; &lt;&lt;action&gt;&gt; &lt;&lt;bitte|&gt;&gt; den &lt;&lt;Rolladen|Rollo&gt;&gt; &lt;&lt;in der|im|&gt;&gt; &lt;&lt;room&gt;&gt;&quot;
roller_c = &quot;partial: mach &lt;&lt;bitte|&gt;&gt; den &lt;&lt;Rolladen|Rollo&gt;&gt; &lt;&lt;in der|im&gt;&gt; &lt;&lt;room&gt;&gt; &lt;&lt;action&gt;&gt;&quot;
roller_d = &quot;partial: mach &lt;&lt;bitte|&gt;&gt; den &lt;&lt;Rolladen|Rollo&gt;&gt; &lt;&lt;action&gt;&gt;&quot;</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../components/">« Components</a><a class="docs-footer-nextpage" href="../topics/">Topics »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 18 April 2020 16:27">Saturday 18 April 2020</span>. Using Julia version 1.2.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
